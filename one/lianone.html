<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        #item {
            display: none;
        }
        td {
            width: 200px;
        }
    </style>
</head>
<body>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>房间号</th>
                <th>住户名</th>
                <th>价钱</th>
                <th>联系电话</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>A101</td>
                <td>张一</td>
                <td>120</td>
                <td>15812312309</td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
            <tr>
                <td>A102</td>
                <td>张二</td>
                <td>120</td>
                <td>15812312309</td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
            <tr>
                <td>A103</td>
                <td>张三</td>
                <td>120</td>
                <td>15812312309</td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
            <tr>
                <td>A104</td>
                <td>张四</td>
                <td>120</td>
                <td>15812312309</td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
            <tr>
                <td>A105</td>
                <td>张五</td>
                <td>120</td>
                <td>15812312309</td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
            <tr id="item">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <button class="btn1">添加</button>
                    <button class="btn2">删除</button>
                </td>
            </tr>
        </tbody>
    </table>
</body>
<script>
    // var td = document.querySelectorAll('td');
    // for(var i = 0; i < td.length; i++){
    //     td[i].onclick = function () {
    //         if(this.firstElementChild == null){
    //             var input = document.createElement('input');
    //             input.type = 'text';
    //             input.value = this.innerHTML;
    //             this.innerHTML = '';
    //             this.appendChild(input);
    //             input.focus();
    //             var _this = this;
    //             input.onblur = function () {
    //                 _this.innerHTML = this.value; 
    //             }
    //         }
    //     }
    // }
    // var add = document.querySelectorAll('.btn1');
    // var del = document.querySelectorAll('.btn2');
    // var tr = document.querySelector('#item');
    // var tbody = document.querySelector('tbody');
    // for(var i = 0; i < add.length; i++){
    //     add[i].onclick = function () {
    //         var otr = tr.cloneNode(true)
    //         otr.id = '';
    //         tbody.insertBefore(otr,this.parentNode.parentNode)
    //     }
    // }
    // for (var i = 0; i < del.length; i++) {
    //     del[i].onclick = function () {
    //         tbody.removeChild(this.parentNode.parentNode);
    //     }
    // }
    var tbody = document.querySelector('tbody');
    var tt = document.querySelector('#item');
    tbody.onclick = function (e) {
        var e = e ||window.event;
        if(e.target.nodeName == 'TD' && e.target.firstElementChild == null) {
            var input = document.createElement('input');
            input.type = 'text';
            input.value = e.target.innerHTML;
            e.target.innerHTML = '';
            e.target.appendChild(input)
            input.focus();
            input.onblur = function(){
                e.target.innerHTML = this.value;
            }
        }
        if(e.target.nodeName == 'BUTTON' && e.target.className == 'btn1'){
            var otr =tt.cloneNode(true);
            otr.id = '';
            this.insertBefore(otr,e.target.parentNode.parentNode);
        }
        if (e.target.nodeName == 'BUTTON' && e.target.className == 'btn2') {
            this.removeChild(e.target.parentNode.parentNode);
        }
    }

</script>
</html>